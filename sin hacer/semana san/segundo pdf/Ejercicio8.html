<!-- Crea un buscador de libros en Javascript usando la API pública openlibrary.org. Usaremos estos
endpoints:
• Búsqueda de libros: https://openlibrary.org/search.json?q=javascript
• El parámetro q (query) permite realizar la búsqueda.
• Portada: https://covers.openlibrary.org/b/isbn/$value‑S.jpg
• $value es el valor del campo ISBN presente en el json de cada objeto libro. Es posible que algu‑
nos libros no tengan este campo. Implementa la siguiente funcionalidad:
a. Crea una caja de texto y un botón “Buscar”. Cuando se pulse el botón se buscará el conte‑
nido de la caja de texto en la API de openlibrary.org usando el endpoint indicado anterior‑
mente.
b. Muestra el mensaje “No se ha encontrado ningún libro” si el número de libros encontrado
es cero.
c. En el caso de que se encuentren libros genera un bloque div con el texto “X libros encon‑
trados” sustituyendo X por el número de libros de la respuesta.
d. Finalmente genera dinámicamente un bloque div por cada libro con el título, subtítulo,
portada y año de publicación. -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>Buscador de Libros</h1>
    <div id="search-container">
        <input type="text" id="search-box" placeholder="Escribe el título del libro...">
        <button id="search-button">Buscar</button>
    </div>
    <div id="results"></div>

    <script>
        const searchBox = document.getElementById("search-box");
        const searchButton = document.getElementById("search-button");
        const resultsDiv = document.getElementById("results");

        async function searchBooks() {
            resultsDiv.innerHTML = "";
            const query = searchBox.value.trim();

            if (query === "") {
                resultsDiv.innerHTML = "<p>Por favor, ingresa un término de búsqueda.</p>";
                return;
            }
            const response = await fetch(`https://openlibrary.org/search.json?q=${encodeURIComponent(query)}`);
            const data = await response.json();
            const numFound = data.numFound;

            if (numFound === 0) {
                resultsDiv.innerHTML = "<p>No se ha encontrado ningún libro</p>";
                return;
            }
            const resultsHeader = document.createElement("div");
            resultsHeader.innerHTML = `<h2>${numFound} libros encontrados</h2>`;
            resultsDiv.appendChild(resultsHeader);

            data.docs.forEach(book => {
                const bookDiv = document.createElement("div");
                bookDiv.className = "book";
                const coverImg = document.createElement("img");

                if (book.isbn && book.isbn.length > 0) {
                    coverImg.src = `https://covers.openlibrary.org/b/isbn/${book.isbn[0]}-S.jpg`;
                } else {
                    coverImg.src = "https://via.placeholder.com/50x75?text=No+Cover";
                }

                const bookDetails = document.createElement("div");

                bookDetails.className = "book-details";

                const title = document.createElement("p");

                title.className = "book-title";

                title.textContent = book.title || "Sin título";

                const subtitle = document.createElement("p");

                subtitle.className = "book-subtitle";

                subtitle.textContent = book.subtitle || "";

                const year = document.createElement("p");

                year.className = "book-year";

                year.textContent = book.first_publish_year ? `Año de publicación: ${book.first_publish_year}` : "Año de publicación desconocido";
                
                bookDetails.appendChild(title);

                bookDetails.appendChild(subtitle);

                bookDetails.appendChild(year);

                bookDiv.appendChild(coverImg);

                bookDiv.appendChild(bookDetails);

                resultsDiv.appendChild(bookDiv);
            });
        }

        searchButton.addEventListener("click", searchBooks);
    </script>
</body>
</html>